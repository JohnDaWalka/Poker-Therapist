# Poker Therapist - AI Chatbot Configuration
# Copy this file to .env.local and add your API keys

# xAI API Key (Primary - for Grok chat and voice features)
# Get your API key from: https://x.ai/api
XAI_API_KEY=xai-your-api-key-here

# OpenAI API Key (Optional - fallback for voice features if x.ai doesn't support TTS/STR)
# Get your API key from: https://platform.openai.com/api-keys
# Only needed if x.ai voice features are not available
OPENAI_API_KEY=your_openai_api_key_here

# Voice Features Configuration
# Enable/disable voice features
VOICE_ENABLED=true

# Voice provider: xai (primary, with openai fallback)
VOICE_PROVIDER=xai

# Enhanced Voice Features (New)
# Enable real-time voice streaming with WebRTC
ENABLE_VOICE_STREAMING=true

# Enable voice activity detection (VAD)
ENABLE_VAD=true

# Enable emotion analysis from voice
ENABLE_EMOTION_ANALYSIS=true

# Enable voice cloning for custom Rex voices
ENABLE_VOICE_CLONING=true

# Default Rex language (en, es, fr, de, it, pt, ja, zh)
DEFAULT_REX_LANGUAGE=en

# Conversation mode (single_turn, continuous, voice_activated)
DEFAULT_CONVERSATION_MODE=single_turn

# Voice Activity Detection sensitivity (0-3, where 3 is most sensitive)
VAD_SENSITIVITY=2

# Authorized VIP users (comma-separated email addresses)
# Leave empty to use default list in chatbot_app.py
AUTHORIZED_EMAILS=m.fanelli1@icloud.com,johndawalka@icloud.com,mauro.fanelli@ctstate.edu,maurofanellijr@gmail.com,cooljack87@icloud.com,jdwalka@pm.me

# Perplexity AI API Key (Legacy - for Vue frontend)
# Get your API key from: https://www.perplexity.ai/settings/api
VUE_APP_PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Anthropic API Key (Legacy - for Vue frontend)
# Get your API key from: https://console.anthropic.com/
VUE_APP_ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google Gemini API Key (Legacy - for Vue frontend)
# Get your API key from: https://makersuite.google.com/app/apikey
VUE_APP_GEMINI_API_KEY=your_gemini_api_key_here

# n8n Workflow Automation Configuration
# n8n instance URL (where your n8n server is running)
N8N_WEBHOOK_URL=http://localhost:5678/webhook

# n8n API Key (optional - for triggering workflows from the app)
# Get from n8n: Settings -> API
N8N_API_KEY=your-n8n-api-key-here

# Poker Therapist API base URL (for n8n to call back)
API_BASE_URL=http://localhost:8000

# External services for n8n workflows (optional)
# Twilio (for SMS alerts)
TWILIO_PHONE=+1234567890
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token

# Slack (for notifications)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Discord (for bot integration)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# Google Sheets (for data export)
GOOGLE_SHEET_ID=your-google-sheet-id
GOOGLE_SERVICE_ACCOUNT_EMAIL=your-service-account@project.iam.gserviceaccount.com

# OAuth/SSO Authentication Configuration
# ==================================================
# Microsoft Azure AD / Windows Account (Institutional SSO)
# Get these from Azure Portal: https://portal.azure.com
# Register your app at: App registrations -> New registration
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_TENANT_ID=common
# For institutional SSO (e.g., ctstate.edu), use your tenant ID instead of 'common'
# Example: MICROSOFT_TENANT_ID=12345678-1234-1234-1234-123456789abc
MICROSOFT_REDIRECT_URI=http://localhost:8501/

# Google OAuth 2.0 / OpenID Connect
# Get these from Google Cloud Console: https://console.cloud.google.com
# Create OAuth 2.0 credentials: APIs & Services -> Credentials -> Create Credentials -> OAuth client ID
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8501/

# Apple Sign In (Optional)
# Get these from Apple Developer Portal: https://developer.apple.com
# Configure Sign In with Apple: Certificates, Identifiers & Profiles -> Keys
APPLE_CLIENT_ID=your-apple-service-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY=your-apple-private-key-pem-content
APPLE_REDIRECT_URI=http://localhost:8501/

# JWT Session Configuration
# Generate a secure random key: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-secure-random-jwt-secret-key
SESSION_TIMEOUT_MINUTES=60
# ===================================================================
# Authentication & Identity Provider Configuration
# ===================================================================
# IMPORTANT: Never commit actual credentials to source control
# Store production credentials in secure secrets management systems

# Microsoft Windows Account / Azure AD Authentication
# For organization-managed Microsoft accounts and institutional SSO
# Azure AD Tenant ID (e.g., your-organization.onmicrosoft.com or GUID)
AZURE_AD_TENANT_ID=your-tenant-id-here

# Azure AD Application (Client) ID
# Register your app at https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps
AZURE_AD_CLIENT_ID=your-client-id-here

# Azure AD Client Secret (DO NOT COMMIT - use secrets management)
AZURE_AD_CLIENT_SECRET=your-client-secret-here

# Azure AD Redirect URI (must match registration)
AZURE_AD_REDIRECT_URI=http://localhost:8000/auth/callback/microsoft

# Institutional SSO Configuration (e.g., ctstate.edu)
# SSO Provider (azure, okta, google-workspace, or custom)
SSO_PROVIDER=azure

# Institutional Domain (for email validation)
INSTITUTIONAL_DOMAIN=ctstate.edu

# SSO Metadata URL or IDP Configuration URL
SSO_METADATA_URL=https://login.microsoftonline.com/your-tenant-id/federationmetadata/2007-06/federationmetadata.xml

# Google Cloud Platform OAuth 2.0 / OpenID Connect
# For accessing GCP APIs and services
# Create credentials at https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Google OAuth Redirect URI
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/callback/google

# Google OAuth Scopes (space-separated)
GOOGLE_OAUTH_SCOPES=openid email profile

# Apple Sign In Configuration (Optional)
# Configure at https://developer.apple.com/account/resources/identifiers/list/serviceId
APPLE_CLIENT_ID=com.your-app.service-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id

# Apple Private Key (DO NOT COMMIT - use secrets management)
# Path to your Apple Sign In private key (.p8 file)
APPLE_PRIVATE_KEY_PATH=/path/to/AuthKey_KEYID.p8

# Apple Redirect URI
APPLE_REDIRECT_URI=http://localhost:8000/auth/callback/apple

# Additional Identity Providers (Optional)
# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Generic OAuth 2.0 Provider
OAUTH_PROVIDER_NAME=CustomProvider
OAUTH_AUTHORIZATION_URL=https://provider.com/oauth/authorize
OAUTH_TOKEN_URL=https://provider.com/oauth/token
OAUTH_USERINFO_URL=https://provider.com/oauth/userinfo
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret

# Session & Security Configuration
# Session secret key (MUST be random and secure in production)
SESSION_SECRET_KEY=generate-a-secure-random-key-minimum-32-characters

# JWT Configuration for API authentication
JWT_SECRET_KEY=generate-a-different-secure-random-key
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# CORS Configuration for production deployment
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# Security Headers
ENABLE_HSTS=true
ENABLE_CSP=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
