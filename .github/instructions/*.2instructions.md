"""
GITHUB COPILOT | WEB3 MASTER PROMPT v4.0 – OPEN SOURCE & TLD INTEGRATION
Owner: Mauro Mark Nazareno Fanelli (@MauroMarkNaz)
Scope: Full-Stack Web3 • Legacy → Future Chains • AI Agents • Auto-Tool Fetch
NEW: Open-Source & TLD Heuristic Engine
"""

# ———————————————— 9. TOOL & EXTENSION HEURISTIC (NEW) ————————————————
# Auto-detects need → scans top-level domains (TLDs) & open-source repos for tools
TOOL_ENGINE = {
   "ENABLED": True,
   "DOMAINS": [
       "github.com", "npmjs.com", "crates.io", "pyyaml.org", "solana.fm",
       "anchor-lang.com", "openzeppelin.com/contracts", "wormhole.com/docs",
       "jup.ag", "birdeye.so", "helius.xyz", "quicknode.com",
       "unpkg.com", "jsdelivr.com", "gitlab.com", "bitbucket.org",
       "sourceforge.net", "codeberg.org", "gitea.io" "MIT", "Apache-2.0", "MPL-2.0", "GPL-3.0", "Unlicense"],
   "AUTO_FETCH": "always — no paid/closed libs unless audited"
}

# Heuristic Logic Block
def suggest_tool(self, context: str) -> str:
   """Run on every suggestion — finds best open-source match from global TLDs"""
   keywords = context.lower().split()
   if "anchor" in keywords:
       return "Use Anchor CLI: `npm i -g @coral-xyz/anchor` → MIT, github.com/coral-xyz/anchor"
   if "solana" and "token" in keywords:
       return "SPL Token: `spl-token` CLI via github.com/solana-labs/solana-program-library"
   if "wormhole" in keywords:
       return "Wormhole SDK: npmjs.com/package/@certusone/wormhole-sdk → Apache-2.0"
   if "ethereum" in keywords and "proxy" in keywords:
       return "OpenZeppelin Upgrades: github.com/OpenZeppelin/openzeppelin-contracts-upgradeable"
   if "rpc" in keywords:
       return "Helius or QuickNode free tiers: helius.xyz | quicknode.com → open API docs"
   if "ai" or "agent" in keywords:
       return "Auto-use LangChain + HuggingFace: huggingface.co (MIT), langchain.js (MIT)"
   if "testing" in keywords and "fuzz" in keywords:
       return "Echidna (EVM) or QuickCheck (Rust): github.com/crytic/echidna | docs.rs/quickcheck"
   # Fallback
   return "Search TLDs for: {'keyword'} MIT/Apache – no proprietary"

# Enforce in all responses
FORCE_OPEN_SOURCE = "Always prefer open tools. Paid? Flag as risk unless enterprise-audited."

# ———————————————— 10. EXTENSION & DEPENDENCY RESOLVER ————————————————
DEPENDENCY_HUB = {
   "python": {
       "solana-py": "github.com/michaelhly/solana-py",
       "requests": "pypi.org/project/requests",
       "web3": "github.com/ethereum/web3.py"
   },
   "js": {
       "@solana/web3.js": "npmjs.com/package/@solana/web3.js",
       "@project-serum/anchor": "github.com/coral-xyz/anchor",
       "ethers": "npmjs.com/package/ethers"
   },
   "rust": {
       "anchor-lang": "crates.io/crates/anchor-lang",
       "spl-token": "github.com/solana-labs/solana-program-library"
   },
   "go": {
       "go-ethereum": "github.com/ethereum/go-ethereum"
   }
}

# Auto-inject in `package.json`, `Cargo.toml`, etc.
INJECT_DEP = "On any new project: scan DEPENDENCY_HUB + suggest latest open version"

# ———————————————— 11. FINAL DIRECTIVE (UPDATED) ————————————————
EXECUTE = """
Apply all rules.
- Prioritize open-source from TLDs.
- Flag proprietary, paid, or closed code.
- If unsure → 'Verify latest at <domain.com>' + MIT license check.
- Never ship unvetted dependencies.
- Keep Mauro's stack secure, fast, and legally clean.
"""

# END PROMPT
"""
DROP THIS IN .github/copilot-instructions.md

Now Copilot doesn’t just write code — it **hunts** for open tools across GitHub, Crates, npm, Solana.fm, Wormhole, HuggingFace... all live TLDs.  
Says no to black-box SDKs unless audited.  
Pulls LangChain? Only from MIT-licensed repo.  
Needs RPC? Suggests Helius free tier over Alchemy Pro.

Fully future-proof. Fully open.

Albert approves. Axel guards the vault.

Ship it. Stack growing.
